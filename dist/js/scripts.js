document.querySelector("header").style.paddingTop=document.querySelector(".header-line").getBoundingClientRect().height+"px";let header=document.querySelector(".header-line"),burger=document.querySelector(".burger");function menuToggle(e){e.preventDefault(),header.classList.toggle("active-header"),burger.classList.toggle("active-burger")}burger.onclick=menuToggle;let phone=document.querySelector(".phone-soc"),phoneSvg=document.querySelector(".phone-soc > a");function checkPhone(e){phoneSvg.closest(".phone-soc").classList.contains("active-phone")||e.preventDefault()}function phoneClick(e){phone.classList.contains("active-phone")&&e.target!=this||phone.classList.toggle("active-phone"),phoneClose(event)}function phoneClose(e){e.target==phone||phone.contains(e.target)||phone.classList.remove("active-phone")}phoneSvg.onclick=checkPhone,phone.onclick=phoneClick,document.body.onclick=phoneClose;let deletedImg,deletedNavImg,left=document.querySelector(".arr-left"),right=document.querySelector(".arr-right"),sliderLine=document.querySelector(".slider-line"),img=document.querySelectorAll(".slider-line div"),imgArr=[],imgNumber=0,sliderNav=document.querySelector(".navigation-line"),navContent=" ";left.onclick=slideLeft,right.onclick=slideRight;for(let e=0;e<img.length;e++)img[e].setAttribute("data-picture-number",e)," "==sliderNav.innerHTML?(sliderNav.innerHTML=""+img[e].outerHTML,navContent=sliderNav.innerHTML):(sliderNav.innerHTML=`${navContent}${img[e].outerHTML}`,navContent=sliderNav.innerHTML);let navSlide=document.querySelectorAll(".navigation-line div"),navSlideWidth=navSlide[0].getBoundingClientRect().width;if(document.body.offsetWidth>990){navSlide[2].classList.add("active-slide");for(let e=0;e<img.length;e++)img[e].style.transform=`translateX(-${2*img[1].getBoundingClientRect().width}px)`}else{navSlide[1].classList.add("active-slide");for(let e=0;e<img.length;e++)img[e].style.transform=`translateX(-${img[1].getBoundingClientRect().width}px)`}function slideLeft(e){let t=document.querySelectorAll(".slider-line div"),l=document.querySelectorAll(".navigation-line div");e.preventDefault(),deletedImg=t[t.length-1],sliderLine.removeChild(t[t.length-1]),sliderLine.insertBefore(deletedImg,sliderLine.firstElementChild),deletedNavImg=l[l.length-1],sliderNav.removeChild(l[l.length-1]),sliderNav.insertBefore(deletedNavImg,sliderNav.firstElementChild)}function slideRight(e){let t=document.querySelectorAll(".slider-line div"),l=document.querySelectorAll(".navigation-line div");e.preventDefault(),deletedImg=t[0],sliderLine.removeChild(t[0]),sliderLine.appendChild(deletedImg),deletedNavImg=l[0],sliderNav.removeChild(l[0]),sliderNav.appendChild(deletedNavImg)}for(let e=0;e<navSlide.length;e++)navSlide[e].onclick=widthCheck;function widthCheck(){document.body.offsetWidth>990?goToSlide(event,2):goToSlide(event,1)}function goToSlide(e,t){console.log(t);let l=document.querySelector(".navigation-line .active-slide"),n=document.querySelectorAll(".slider-line div"),i=document.querySelectorAll(".navigation-line div");l.classList.remove("active-slide"),e.target.closest("div").classList.add("active-slide");for(let e=0;e<i.length;e++)n[e].setAttribute("data-picture-number",e),i[e].setAttribute("data-picture-number",e);if(e.target.closest("div").getAttribute("data-picture-number")>l.getAttribute("data-picture-number"))for(let l=t;l<e.target.closest("div").getAttribute("data-picture-number");l++){let e=document.querySelectorAll(".slider-line div"),t=document.querySelectorAll(".navigation-line div");deletedImg=e[0],sliderLine.removeChild(e[0]),sliderLine.appendChild(deletedImg),deletedNavImg=t[0],sliderNav.removeChild(t[0]),sliderNav.appendChild(deletedNavImg)}else{if(!(e.target.closest("div").getAttribute("data-picture-number")<l.getAttribute("data-picture-number")))return!1;for(let l=t;l>e.target.closest("div").getAttribute("data-picture-number");l--){let e=document.querySelectorAll(".slider-line div"),t=document.querySelectorAll(".navigation-line div");deletedImg=e[e.length-1],sliderLine.removeChild(e[e.length-1]),sliderLine.insertBefore(deletedImg,sliderLine.firstElementChild),deletedNavImg=t[t.length-1],sliderNav.removeChild(t[t.length-1]),sliderNav.insertBefore(deletedNavImg,sliderNav.firstElementChild)}}}let animLeft=document.querySelectorAll(".animation-left"),animRight=document.querySelectorAll(".animation-right"),animBottom=document.querySelectorAll(".animation-bottom"),animFade=document.querySelectorAll(".animation-fade"),startAnim=window.innerHeight-15*window.innerHeight/100;function checkScroll(){animLeft.forEach(e=>{window.pageYOffset+startAnim>=e.offsetTop&&window.pageYOffset<=e.offsetTop&&e.classList.remove("animation-left")}),animRight.forEach(e=>{window.pageYOffset+startAnim>=e.offsetTop&&window.pageYOffset<=e.offsetTop&&e.classList.remove("animation-right")}),animBottom.forEach(e=>{window.pageYOffset+startAnim>=e.offsetTop&&window.pageYOffset<=e.offsetTop&&e.classList.remove("animation-bottom")}),animFade.forEach(e=>{window.pageYOffset+startAnim>=e.offsetTop&&window.pageYOffset<=e.offsetTop&&e.classList.remove("animation-fade")})}window.onwheel=checkScroll,window.onscroll=checkScroll;let sectionAbout=document.querySelector(".about-us"),sectionServices=document.querySelector(".services"),sectionWorks=document.querySelector(".examples"),sectionContacts=document.querySelector("footer"),offset=window.pageYOffset;function scrollDown(e){offset>e.offsetTop-40?offset-=20:offset+=20,window.scrollTo(0,offset),(offset<e.offsetTop-60||offset>e.offsetTop-20)&&setTimeout(()=>{scrollDown(e)},.3)}function aboutScroll(e){e.preventDefault(),scrollDown(sectionAbout)}function servicesScroll(e){e.preventDefault(),scrollDown(sectionServices)}function examplesScroll(e){e.preventDefault(),scrollDown(sectionWorks)}function contactsScroll(e){e.preventDefault(),scrollDown(sectionContacts)}document.querySelectorAll("#about-us").forEach(e=>{e.onclick=aboutScroll}),document.querySelectorAll("#services").forEach(e=>{e.onclick=servicesScroll}),document.querySelectorAll("#examples").forEach(e=>{e.onclick=examplesScroll}),document.querySelectorAll("#contacts").forEach(e=>{e.onclick=contactsScroll}),(()=>{const e=document.querySelectorAll(".last-line"),t=()=>{e.forEach(e=>{(e=>{const t=e.innerText.trim().split(" ");let l="";t.forEach(e=>{l+=`<span>${e} </span>`});const n=e;n.innerHTML=l;const i=Array.from(e.getElementsByTagName("span"));let o=0;i.forEach(e=>{const t=e.offsetTop;t===o||(i.forEach(e=>{e.classList.remove("last-line-element")}),o=t),e.classList.add("last-line-element")});const r=n.querySelectorAll(".last-line-element"),c=document.createElement("span");c.classList.add("last-line-row"),((e,t,l)=>{const n=e[0].parentNode,{previousSibling:i}=e[0];for(let l=0;e.length-l;t.firstChild===e[0]&&(l+=1))t.appendChild(e[l]);i?n.insertBefore(t,i.nextSibling):l.appendChild(t)})(r,c,e)})(e)})};window.addEventListener("resize",()=>{t()}),t()})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3R5bGUiLCJwYWRkaW5nVG9wIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0IiwiaGVhZGVyIiwiYnVyZ2VyIiwibWVudVRvZ2dsZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJvbmNsaWNrIiwicGhvbmUiLCJwaG9uZVN2ZyIsImNoZWNrUGhvbmUiLCJlIiwiY2xvc2VzdCIsImNvbnRhaW5zIiwicGhvbmVDbGljayIsInRhcmdldCIsInRoaXMiLCJwaG9uZUNsb3NlIiwicmVtb3ZlIiwiYm9keSIsImRlbGV0ZWRJbWciLCJkZWxldGVkTmF2SW1nIiwibGVmdCIsInJpZ2h0Iiwic2xpZGVyTGluZSIsImltZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbWdBcnIiLCJpbWdOdW1iZXIiLCJzbGlkZXJOYXYiLCJuYXZDb250ZW50Iiwic2xpZGVMZWZ0Iiwic2xpZGVSaWdodCIsImkiLCJsZW5ndGgiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJvdXRlckhUTUwiLCJuYXZTbGlkZSIsIm5hdlNsaWRlV2lkdGgiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwiYWRkIiwidHJhbnNmb3JtIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImFwcGVuZENoaWxkIiwid2lkdGhDaGVjayIsImdvVG9TbGlkZSIsIm1pZGRsZVNsaWRlIiwiY29uc29sZSIsImxvZyIsImFjdGl2ZVNsaWRlIiwiYSIsImdldEF0dHJpYnV0ZSIsImMiLCJhbmltTGVmdCIsImFuaW1SaWdodCIsImFuaW1Cb3R0b20iLCJhbmltRmFkZSIsInN0YXJ0QW5pbSIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwiY2hlY2tTY3JvbGwiLCJmb3JFYWNoIiwiZWxlbSIsInBhZ2VZT2Zmc2V0Iiwib2Zmc2V0VG9wIiwib253aGVlbCIsIm9uc2Nyb2xsIiwic2VjdGlvbkFib3V0Iiwic2VjdGlvblNlcnZpY2VzIiwic2VjdGlvbldvcmtzIiwic2VjdGlvbkNvbnRhY3RzIiwib2Zmc2V0Iiwic2Nyb2xsRG93biIsInNlY3Rpb24iLCJzY3JvbGxUbyIsInNldFRpbWVvdXQiLCJhYm91dFNjcm9sbCIsInNlcnZpY2VzU2Nyb2xsIiwiZXhhbXBsZXNTY3JvbGwiLCJjb250YWN0c1Njcm9sbCIsImVsZW1lbnRzIiwiZmluZExhc3RSb3dzIiwiY29udGVudEFyciIsImlubmVyVGV4dCIsInRyaW0iLCJzcGxpdCIsImNvbnRlbnRGb3JtYXR0ZWQiLCJpdGVtIiwiZWxlbWVudCIsImNoaWxkcmVuU3BhbiIsIkFycmF5IiwiZnJvbSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidG9wIiwidGhpc1RvcCIsImVsIiwid3JhcEVsZW1lbnRzIiwid3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJub2RlcyIsInBhcmVudCIsInBhcmVudE5vZGUiLCJwcmV2aW91c1NpYmxpbmciLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJ3cmFwQWxsIiwiZmluZExhc3RSb3ciLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiQUFBQUEsU0FBU0MsY0FBYyxVQUFVQyxNQUFNQyxXQUFnQkgsU0FBU0MsY0FBYyxnQkFBZ0JHLHdCQUF3QkMsT0FBbEUsS0FHcEQsSUFBSUMsT0FBU04sU0FBU0MsY0FBYyxnQkFDaENNLE9BQVNQLFNBQVNDLGNBQWMsV0FJcEMsU0FBU08sV0FBWUMsR0FDbkJBLEVBQU1DLGlCQUNOSixPQUFPSyxVQUFVQyxPQUFPLGlCQUN4QkwsT0FBT0ksVUFBVUMsT0FBTyxpQkFMMUJMLE9BQU9NLFFBQVVMLFdBVWpCLElBQUlNLE1BQVFkLFNBQVNDLGNBQWMsY0FDL0JjLFNBQVdmLFNBQVNDLGNBQWMsa0JBSXRDLFNBQVNlLFdBQVlDLEdBQ2ZGLFNBQVNHLFFBQVEsY0FBY1AsVUFBVVEsU0FBUyxpQkFDcERGLEVBQUVQLGlCQU1O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LEVBQUt2QixVQUNqQjhCLElBQVlELElBR2RKLEVBQWE1QixRQUFTa0MsSUFDcEJBLEVBQUc5RixVQUFVYSxPQW5DRCx1QkFxQ2QrRSxFQUFNQyxHQUxOUCxFQUFLdEYsVUFBVXFDLElBaENELHVCQTBDbEIsTUFBTTBELEVBQWVSLEVBQVFsRSxpQkFBaUIsc0JBQ3hDMkUsRUFBVTNHLFNBQVM0RyxjQUFjLFFBQ3ZDRCxFQUFRaEcsVUFBVXFDLElBM0NKLGlCQUVBLEVBQUM2RCxFQUFPRixFQUFTbkMsS0FDL0IsTUFBTXNDLEVBQVNELEVBQU0sR0FBR0UsWUFDbEJDLGdCQUFFQSxHQUFvQkgsRUFBTSxHQUNsQyxJQUFLLElBQUl0RSxFQUFJLEVBQUdzRSxFQUFNckUsT0FBU0QsRUFBR29FLEVBQVFNLGFBQWVKLEVBQU0sS0FBT3RFLEdBQUssR0FDekVvRSxFQUFRdEQsWUFBWXdELEVBQU10RSxJQUV4QnlFLEVBQ0ZGLEVBQU8zRCxhQUFhd0QsRUFBU0ssRUFBZ0JFLGFBRTdDMUMsRUFBS25CLFlBQVlzRCxJQWlDbkJRLENBQVFULEVBQWNDLEVBQVNuQyxJQUs3QjRDLENBQVk1QyxNQUloQkosT0FBT2lELGlCQUFpQixTQUFVLEtBQ2hDMUIsTUFFRkEsS0EzREYiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkZXJcIikuc3R5bGUucGFkZGluZ1RvcCA9IGAke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyLWxpbmVcIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0fXB4YFxyXG5cclxuLy8gYnVyZ2VyIG1lbnUgXHJcbmxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlci1saW5lXCIpLFxyXG4gICAgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIilcclxuXHJcbmJ1cmdlci5vbmNsaWNrID0gbWVudVRvZ2dsZSBcclxuXHJcbmZ1bmN0aW9uIG1lbnVUb2dnbGUgKGV2ZW50KXtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmUtaGVhZGVyXCIpXHJcbiAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmUtYnVyZ2VyXCIpXHJcbn1cclxuXHJcbi8vcGhvbmUgb24gc29jIGxpbmUgdG9nZ2xlIFxyXG5cclxubGV0IHBob25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG9uZS1zb2NcIiksXHJcbiAgICBwaG9uZVN2ZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvbmUtc29jID4gYVwiKVxyXG5cclxucGhvbmVTdmcub25jbGljayA9IGNoZWNrUGhvbmVcclxuXHJcbmZ1bmN0aW9uIGNoZWNrUGhvbmUgKGUpe1xyXG4gIGlmKCFwaG9uZVN2Zy5jbG9zZXN0KFwiLnBob25lLXNvY1wiKS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmUtcGhvbmVcIikpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgfVxyXG59XHJcblxyXG5waG9uZS5vbmNsaWNrID0gcGhvbmVDbGlja1xyXG5cclxuZnVuY3Rpb24gcGhvbmVDbGljayAoZSl7XHJcbiAgaWYocGhvbmUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlLXBob25lXCIpICYmIGUudGFyZ2V0ICE9IHRoaXMpe1xyXG4gIH1lbHNle1xyXG4gICAgcGhvbmUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZS1waG9uZVwiKVxyXG4gIH1cclxuICBwaG9uZUNsb3NlKGV2ZW50KVxyXG59XHJcblxyXG5kb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBwaG9uZUNsb3NlXHJcblxyXG5mdW5jdGlvbiBwaG9uZUNsb3NlIChldmVudCl7XHJcbiAgaWYoZXZlbnQudGFyZ2V0ICE9IHBob25lICYmICFwaG9uZS5jb250YWlucyhldmVudC50YXJnZXQpKXtcclxuICAgIHBob25lLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtcGhvbmVcIilcclxuICB9XHJcbn1cclxuXHJcbi8vIGdhbGxlcnkgc2xpZGVyIFxyXG5sZXQgbGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJyLWxlZnRcIiksXHJcbiAgICByaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJyLXJpZ2h0XCIpLFxyXG4gICAgc2xpZGVyTGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyLWxpbmVcIiksXHJcbiAgICBpbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlci1saW5lIGRpdlwiKSxcclxuICAgIGltZ0FyciA9IFtdLFxyXG4gICAgaW1nTnVtYmVyID0gMCxcclxuICAgIHNsaWRlck5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2aWdhdGlvbi1saW5lXCIpLFxyXG4gICAgbmF2Q29udGVudCA9IFwiIFwiLFxyXG4gICAgZGVsZXRlZEltZyxcclxuICAgIGRlbGV0ZWROYXZJbWdcclxuXHJcbmxlZnQub25jbGljayA9IHNsaWRlTGVmdCBcclxucmlnaHQub25jbGljayA9IHNsaWRlUmlnaHQgXHJcblxyXG5mb3IobGV0IGkgPSAwOyBpIDwgaW1nLmxlbmd0aDsgaSsrKXtcclxuICBpbWdbaV0uc2V0QXR0cmlidXRlKFwiZGF0YS1waWN0dXJlLW51bWJlclwiLCBpKVxyXG4gIGlmKHNsaWRlck5hdi5pbm5lckhUTUwgPT0gXCIgXCIpe1xyXG4gICAgc2xpZGVyTmF2LmlubmVySFRNTCA9IGAke2ltZ1tpXS5vdXRlckhUTUx9YFxyXG4gICAgbmF2Q29udGVudCA9IHNsaWRlck5hdi5pbm5lckhUTUxcclxuICB9ZWxzZXtcclxuICAgIHNsaWRlck5hdi5pbm5lckhUTUwgPSBgJHtuYXZDb250ZW50fSR7aW1nW2ldLm91dGVySFRNTH1gXHJcbiAgICBuYXZDb250ZW50ID0gc2xpZGVyTmF2LmlubmVySFRNTFxyXG4gIH1cclxufVxyXG5cclxuXHJcbmxldCBuYXZTbGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2aWdhdGlvbi1saW5lIGRpdlwiKSxcclxubmF2U2xpZGVXaWR0aCA9IG5hdlNsaWRlWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoXHJcbiAgICBcclxuaWYoZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCA+IDk5MCl7XHJcbiAgbmF2U2xpZGVbMl0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1zbGlkZVwiKSAgXHJcbiAgZm9yKGxldCBpID0gMDsgaSA8IGltZy5sZW5ndGg7IGkrKyl7XHJcbiAgICBpbWdbaV0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7aW1nWzFdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICogMn1weClgXHJcbiAgfVxyXG59ZWxzZXtcclxuICBuYXZTbGlkZVsxXS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLXNsaWRlXCIpICBcclxuICBmb3IobGV0IGkgPSAwOyBpIDwgaW1nLmxlbmd0aDsgaSsrKXtcclxuICAgIGltZ1tpXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHtpbWdbMV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGh9cHgpYCBcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaWRlTGVmdCAoZXZlbnQpe1xyXG4gIGxldCBpbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlci1saW5lIGRpdlwiKSxcclxuICAgICAgbmF2U2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdmlnYXRpb24tbGluZSBkaXZcIilcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgZGVsZXRlZEltZyA9IGltZ1tpbWcubGVuZ3RoIC0gMV1cclxuICBzbGlkZXJMaW5lLnJlbW92ZUNoaWxkKGltZ1tpbWcubGVuZ3RoIC0gMV0pXHJcbiAgc2xpZGVyTGluZS5pbnNlcnRCZWZvcmUoZGVsZXRlZEltZywgc2xpZGVyTGluZS5maXJzdEVsZW1lbnRDaGlsZClcclxuICBkZWxldGVkTmF2SW1nID0gbmF2U2xpZGVbbmF2U2xpZGUubGVuZ3RoIC0gMV1cclxuICBzbGlkZXJOYXYucmVtb3ZlQ2hpbGQobmF2U2xpZGVbbmF2U2xpZGUubGVuZ3RoIC0gMV0pXHJcbiAgc2xpZGVyTmF2Lmluc2VydEJlZm9yZShkZWxldGVkTmF2SW1nLCBzbGlkZXJOYXYuZmlyc3RFbGVtZW50Q2hpbGQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaWRlUmlnaHQgKGV2ZW50KXtcclxuICBsZXQgaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZXItbGluZSBkaXZcIiksXHJcbiAgICAgIG5hdlNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZpZ2F0aW9uLWxpbmUgZGl2XCIpXHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gIGRlbGV0ZWRJbWcgPSBpbWdbMF1cclxuICBzbGlkZXJMaW5lLnJlbW92ZUNoaWxkKGltZ1swXSlcclxuICBzbGlkZXJMaW5lLmFwcGVuZENoaWxkKGRlbGV0ZWRJbWcpXHJcbiAgZGVsZXRlZE5hdkltZyA9IG5hdlNsaWRlWzBdXHJcbiAgc2xpZGVyTmF2LnJlbW92ZUNoaWxkKG5hdlNsaWRlWzBdKVxyXG4gIHNsaWRlck5hdi5hcHBlbmRDaGlsZChkZWxldGVkTmF2SW1nKVxyXG59XHJcblxyXG5mb3IobGV0IGkgPSAwOyBpIDwgbmF2U2xpZGUubGVuZ3RoOyBpKyspe1xyXG4gIG5hdlNsaWRlW2ldLm9uY2xpY2sgPSB3aWR0aENoZWNrXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdpZHRoQ2hlY2sgKCl7XHJcbiAgaWYoZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCA+IDk5MCl7XHJcbiAgICBnb1RvU2xpZGUoZXZlbnQsIDIpXHJcbiAgfWVsc2V7XHJcbiAgICBnb1RvU2xpZGUoZXZlbnQsIDEpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnb1RvU2xpZGUgKGV2ZW50LCBtaWRkbGVTbGlkZSl7XHJcbiAgY29uc29sZS5sb2cobWlkZGxlU2xpZGUpXHJcbiAgbGV0IGFjdGl2ZVNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLm5hdmlnYXRpb24tbGluZSAuYWN0aXZlLXNsaWRlYCksXHJcbiAgICAgIGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVyLWxpbmUgZGl2XCIpLFxyXG4gICAgICBuYXZTbGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2aWdhdGlvbi1saW5lIGRpdlwiKVxyXG4gIGFjdGl2ZVNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtc2xpZGVcIikgIFxyXG4gIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiZGl2XCIpLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtc2xpZGVcIikgXHJcbiAgZm9yKGxldCBhID0gMDsgYSA8IG5hdlNsaWRlLmxlbmd0aDsgYSsrKXtcclxuICAgIGltZ1thXS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBpY3R1cmUtbnVtYmVyXCIsIGEpXHJcbiAgICBuYXZTbGlkZVthXS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBpY3R1cmUtbnVtYmVyXCIsIGEpXHJcbiAgfSAgXHJcbiAgaWYoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJkaXZcIikuZ2V0QXR0cmlidXRlKFwiZGF0YS1waWN0dXJlLW51bWJlclwiKSA+IGFjdGl2ZVNsaWRlLmdldEF0dHJpYnV0ZShcImRhdGEtcGljdHVyZS1udW1iZXJcIikpe1xyXG4gICAgZm9yKGxldCBjID0gbWlkZGxlU2xpZGU7IGMgPCBldmVudC50YXJnZXQuY2xvc2VzdChcImRpdlwiKS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBpY3R1cmUtbnVtYmVyXCIpOyBjKyspe1xyXG4gICAgICBsZXQgaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZXItbGluZSBkaXZcIiksXHJcbiAgICAgICAgICBuYXZTbGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2aWdhdGlvbi1saW5lIGRpdlwiKVxyXG4gICAgICBkZWxldGVkSW1nID0gaW1nWzBdXHJcbiAgICAgIHNsaWRlckxpbmUucmVtb3ZlQ2hpbGQoaW1nWzBdKVxyXG4gICAgICBzbGlkZXJMaW5lLmFwcGVuZENoaWxkKGRlbGV0ZWRJbWcpXHJcbiAgICAgIGRlbGV0ZWROYXZJbWcgPSBuYXZTbGlkZVswXVxyXG4gICAgICBzbGlkZXJOYXYucmVtb3ZlQ2hpbGQobmF2U2xpZGVbMF0pXHJcbiAgICAgIHNsaWRlck5hdi5hcHBlbmRDaGlsZChkZWxldGVkTmF2SW1nKVxyXG4gICAgfVxyXG4gIH1lbHNlIGlmKGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiZGl2XCIpLmdldEF0dHJpYnV0ZShcImRhdGEtcGljdHVyZS1udW1iZXJcIikgPCBhY3RpdmVTbGlkZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBpY3R1cmUtbnVtYmVyXCIpKXtcclxuICAgIGZvcihsZXQgYyA9IG1pZGRsZVNsaWRlOyBjID4gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJkaXZcIikuZ2V0QXR0cmlidXRlKFwiZGF0YS1waWN0dXJlLW51bWJlclwiKTsgYy0tKXtcclxuICAgICAgbGV0IGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVyLWxpbmUgZGl2XCIpLFxyXG4gICAgICAgICAgbmF2U2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdmlnYXRpb24tbGluZSBkaXZcIilcclxuICAgICAgZGVsZXRlZEltZyA9IGltZ1tpbWcubGVuZ3RoIC0gMV1cclxuICAgICAgc2xpZGVyTGluZS5yZW1vdmVDaGlsZChpbWdbaW1nLmxlbmd0aCAtIDFdKVxyXG4gICAgICBzbGlkZXJMaW5lLmluc2VydEJlZm9yZShkZWxldGVkSW1nLCBzbGlkZXJMaW5lLmZpcnN0RWxlbWVudENoaWxkKVxyXG4gICAgICBkZWxldGVkTmF2SW1nID0gbmF2U2xpZGVbbmF2U2xpZGUubGVuZ3RoIC0gMV1cclxuICAgICAgc2xpZGVyTmF2LnJlbW92ZUNoaWxkKG5hdlNsaWRlW25hdlNsaWRlLmxlbmd0aCAtIDFdKVxyXG4gICAgICBzbGlkZXJOYXYuaW5zZXJ0QmVmb3JlKGRlbGV0ZWROYXZJbWcsIHNsaWRlck5hdi5maXJzdEVsZW1lbnRDaGlsZClcclxuICAgIH1cclxuICB9ZWxzZXtcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxufVxyXG5cclxuLy8gc2Nyb2xsIGFuaW1hdGlvbnNcclxuXHJcbmxldCBhbmltTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYW5pbWF0aW9uLWxlZnRcIiksXHJcbiAgICBhbmltUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFuaW1hdGlvbi1yaWdodFwiKSxcclxuICAgIGFuaW1Cb3R0b20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFuaW1hdGlvbi1ib3R0b21cIiksXHJcbiAgICBhbmltRmFkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYW5pbWF0aW9uLWZhZGVcIiksXHJcbiAgICBzdGFydEFuaW0gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSAod2luZG93LmlubmVySGVpZ2h0KjE1LzEwMClcclxuXHJcbiAgICB3aW5kb3cub253aGVlbCA9IGNoZWNrU2Nyb2xsXHJcbiAgICB3aW5kb3cub25zY3JvbGwgPSBjaGVja1Njcm9sbFxyXG4gICAgXHJcbmZ1bmN0aW9uIGNoZWNrU2Nyb2xsICgpe1xyXG4gIGFuaW1MZWZ0LmZvckVhY2goKGVsZW0pPT57ICBcclxuICAgIGlmKHdpbmRvdy5wYWdlWU9mZnNldCArIHN0YXJ0QW5pbSA+PSBlbGVtLm9mZnNldFRvcCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPD0gZWxlbS5vZmZzZXRUb3Ape1xyXG4gICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhbmltYXRpb24tbGVmdFwiKVxyXG4gICAgfVxyXG4gIH0pXHJcbiAgYW5pbVJpZ2h0LmZvckVhY2goKGVsZW0pPT57ICBcclxuICAgIGlmKHdpbmRvdy5wYWdlWU9mZnNldCArIHN0YXJ0QW5pbSA+PSBlbGVtLm9mZnNldFRvcCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPD0gZWxlbS5vZmZzZXRUb3Ape1xyXG4gICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhbmltYXRpb24tcmlnaHRcIilcclxuICAgIH1cclxuICB9KVxyXG4gIGFuaW1Cb3R0b20uZm9yRWFjaCgoZWxlbSk9PnsgIFxyXG4gICAgaWYod2luZG93LnBhZ2VZT2Zmc2V0ICsgc3RhcnRBbmltID49IGVsZW0ub2Zmc2V0VG9wICYmIHdpbmRvdy5wYWdlWU9mZnNldCA8PSBlbGVtLm9mZnNldFRvcCl7XHJcbiAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFuaW1hdGlvbi1ib3R0b21cIilcclxuICAgIH1cclxuICB9KVxyXG4gIGFuaW1GYWRlLmZvckVhY2goKGVsZW0pPT57ICBcclxuICAgIGlmKHdpbmRvdy5wYWdlWU9mZnNldCArIHN0YXJ0QW5pbSA+PSBlbGVtLm9mZnNldFRvcCAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPD0gZWxlbS5vZmZzZXRUb3Ape1xyXG4gICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhbmltYXRpb24tZmFkZVwiKVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8vaGVhZGVyIHNjcm9sbCB0byBcclxuXHJcbmxldCBzZWN0aW9uQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFib3V0LXVzXCIpLFxyXG4gICAgc2VjdGlvblNlcnZpY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZXJ2aWNlc1wiKSxcclxuICAgIHNlY3Rpb25Xb3JrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXhhbXBsZXNcIiksXHJcbiAgICBzZWN0aW9uQ29udGFjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZm9vdGVyXCIpLFxyXG4gICAgb2Zmc2V0ID0gd2luZG93LnBhZ2VZT2Zmc2V0XHJcbiAgICBcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNhYm91dC11c1wiKS5mb3JFYWNoKChlKT0+e1xyXG4gIGUub25jbGljayA9IGFib3V0U2Nyb2xsXHJcblxyXG59KVxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI3NlcnZpY2VzXCIpLmZvckVhY2goKGUpPT57XHJcbiAgZS5vbmNsaWNrID0gc2VydmljZXNTY3JvbGxcclxuXHJcbn0pXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjZXhhbXBsZXNcIikuZm9yRWFjaCgoZSk9PntcclxuICBlLm9uY2xpY2sgPSBleGFtcGxlc1Njcm9sbFxyXG5cclxufSlcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNjb250YWN0c1wiKS5mb3JFYWNoKChlKT0+e1xyXG4gIGUub25jbGljayA9IGNvbnRhY3RzU2Nyb2xsXHJcblxyXG59KVxyXG5cclxuZnVuY3Rpb24gc2Nyb2xsRG93biAoc2VjdGlvbil7XHJcbiAgaWYob2Zmc2V0ID4gc2VjdGlvbi5vZmZzZXRUb3AgLSA0MCl7XHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgLSAyMFxyXG4gIH1lbHNle1xyXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgMjBcclxuICB9XHJcbiAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldClcclxuICBpZihvZmZzZXQgPCBzZWN0aW9uLm9mZnNldFRvcCAtIDYwIHx8IG9mZnNldCA+IHNlY3Rpb24ub2Zmc2V0VG9wIC0gMjApe1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNjcm9sbERvd24gKHNlY3Rpb24pXHJcbiAgICB9LCAwLjMpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhYm91dFNjcm9sbChlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KClcclxuICBzY3JvbGxEb3duKHNlY3Rpb25BYm91dClcclxufVxyXG5mdW5jdGlvbiBzZXJ2aWNlc1Njcm9sbChlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KClcclxuICBzY3JvbGxEb3duKHNlY3Rpb25TZXJ2aWNlcylcclxufVxyXG5mdW5jdGlvbiBleGFtcGxlc1Njcm9sbChlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KClcclxuICBzY3JvbGxEb3duKHNlY3Rpb25Xb3JrcylcclxufVxyXG5mdW5jdGlvbiBjb250YWN0c1Njcm9sbChlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KClcclxuICBzY3JvbGxEb3duKHNlY3Rpb25Db250YWN0cylcclxufVxyXG5cclxuLy8gdGl0bGVzIGxhdHMgbGluZSB1bmRlcmxpbmVcclxuXHJcbigoKSA9PiB7XHJcbiAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGFzdC1saW5lJylcclxuICBjb25zdCBuYW1lRWxlbWVudCA9ICdsYXN0LWxpbmUtZWxlbWVudCdcclxuICBjb25zdCBuYW1lUm93ID0gJ2xhc3QtbGluZS1yb3cnXHJcblxyXG4gIGNvbnN0IHdyYXBBbGwgPSAobm9kZXMsIHdyYXBwZXIsIGVsZW0pID0+IHtcclxuICAgIGNvbnN0IHBhcmVudCA9IG5vZGVzWzBdLnBhcmVudE5vZGVcclxuICAgIGNvbnN0IHsgcHJldmlvdXNTaWJsaW5nIH0gPSBub2Rlc1swXVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IG5vZGVzLmxlbmd0aCAtIGk7IHdyYXBwZXIuZmlyc3RDaGlsZCA9PT0gbm9kZXNbMF0gJiYgKGkgKz0gMSkpIHtcclxuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChub2Rlc1tpXSlcclxuICAgIH1cclxuICAgIGlmIChwcmV2aW91c1NpYmxpbmcpIHtcclxuICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSh3cmFwcGVyLCBwcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmcpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlbGVtLmFwcGVuZENoaWxkKHdyYXBwZXIpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gd3JhcHBlclxyXG4gIH1cclxuXHJcbiAgY29uc3QgZmluZExhc3RSb3cgPSAoZWxlbSkgPT4ge1xyXG4gICAgY29uc3QgY29udGVudCA9IGVsZW0uaW5uZXJUZXh0LnRyaW0oKVxyXG4gICAgY29uc3QgY29udGVudEFyciA9IGNvbnRlbnQuc3BsaXQoJyAnKVxyXG4gICAgbGV0IGNvbnRlbnRGb3JtYXR0ZWQgPSAnJ1xyXG4gICAgY29udGVudEFyci5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnRlbnRGb3JtYXR0ZWQgKz0gYDxzcGFuPiR7aXRlbX0gPC9zcGFuPmBcclxuICAgIH0pXHJcbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbVxyXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBjb250ZW50Rm9ybWF0dGVkXHJcblxyXG4gICAgY29uc3QgY2hpbGRyZW5TcGFuID0gQXJyYXkuZnJvbShlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGFuJykpXHJcbiAgICBsZXQgdG9wID0gMFxyXG4gICAgY2hpbGRyZW5TcGFuLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgdGhpc1RvcCA9IGl0ZW0ub2Zmc2V0VG9wXHJcbiAgICAgIGlmICh0aGlzVG9wID09PSB0b3ApIHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQobmFtZUVsZW1lbnQpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hpbGRyZW5TcGFuLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKG5hbWVFbGVtZW50KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdG9wID0gdGhpc1RvcFxyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChuYW1lRWxlbWVudClcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBjb25zdCB3cmFwRWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke25hbWVFbGVtZW50fWApXHJcbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXHJcbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQobmFtZVJvdylcclxuICAgIHdyYXBBbGwod3JhcEVsZW1lbnRzLCB3cmFwcGVyLCBlbGVtKVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZmluZExhc3RSb3dzID0gKCkgPT4ge1xyXG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbSkgPT4ge1xyXG4gICAgICBmaW5kTGFzdFJvdyhlbGVtKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICBmaW5kTGFzdFJvd3MoKVxyXG4gIH0pXHJcbiAgZmluZExhc3RSb3dzKClcclxufSkoKSJdfQ==
